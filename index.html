<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta
            name="description"
            content="Homepage for the max1220 Window Manager Library"
        />
        <meta name="author" content="max1220" />
        <link rel="icon" type="image/x-icon" href="./img/favicon/favicon.png" />
        <title>Element</title>
        <style></style>
        <link rel="stylesheet" href="window_common.css" />
        <link id="window_style" rel="stylesheet" href="window_flat.css" />
        <link rel="stylesheet" href="./css/style.css" />
        <link rel="stylesheet" href="./css/clock.css" />
        <link rel="stylesheet" href="./css/menubar.css" />
        <link rel="stylesheet" href="./css/widgets-weather.css" />
    </head>
    <body onload="initClock()">
        <section>
            <div class="tp-taskBar">
                <div class="app-container">
                    <button class="btn hamburger" style="margin-left: 1rem">
                        <img
                            src="./img/logo/logo.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>

                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/calculator.html')"
                    >
                        <img
                            src="./img/icon/calculator.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>

                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/JSpaint.html')"
                    >
                        <img
                            src="./img/icon/jspaint.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>

                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/map.html')"
                    >
                        <img
                            src="./img/icon/map.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>

                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/calendar.html')"
                    >
                        <img
                            src="./img/icon/calendar.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>

                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/note.html')"
                    >
                        <img
                            src="./img/icon/notes.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>

                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/musicPlayer.html')"
                    >
                        <img
                            src="./img/icon/music-player.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>

                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/toDoApp.html')"
                    >
                        <img
                            src="./img/icon/toDoApp.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>

                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/BMIcalc.html')"
                    >
                        <img
                            src="./img/icon/bmi.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>

                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/stopwatch.html')"
                    >
                        <img
                            src="./img/icon/stopwatch.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>

                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/voiceRecoder.html')"
                    >
                        <img
                            src="./img/icon/voiceRecoder.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>

                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/weather.html')"
                    >
                        <img
                            src="./img/icon/weather.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>
                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/pomodoroTimer.html')"
                    >
                        <img
                            src="./img/icon/pomodoroTimer.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>
                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/stopwatch.html')"
                    >
                        <img
                            src="./img/icon/stopwatch.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>
                </div>
                <div class="tp-separator"></div>
                <div class="utilities">
                    <!-- <div id="minimized_window_list"></div> -->
                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/weather.html')"
                    >
                        <img
                            src="./img/icon/weather.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>
                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/volumController.html')"
                    >
                        <img
                            src="./img/logo/volume.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>
                    <button
                        class="btn"
                        onclick="wm.add_window('./widgets.html')"
                    >
                        <img
                            src="./img/logo/setting.png"
                            alt="icon"
                            width="30px"
                            height="30px"
                        />
                    </button>
                    <button
                        class="btn"
                        onclick="wm.add_window('./Elements/calendar.html')"
                    >
                        <div class="clock">
                            <div class="datetime">
                                <div class="time">
                                    <span id="hour">00</span>:<span id="minutes"
                                        >00</span
                                    >:<span id="seconds">00</span>
                                    <span id="period">AM</span>
                                </div>
                                <div class="date">
                                    <span id="dayname">Day</span>,
                                    <span id="month">Month</span>
                                    <span id="daynum">00</span>,
                                    <span id="year">Year</span>
                                </div>
                            </div>
                        </div>
                    </button>
                </div>
            </div>
        </section>
        <!-- Container for the moveable windows(managed by javascript) -->
        <div id="window_container"></div>

        <!-- Regular HTML content -->
        <div class="content">
            <div class="menubar">
                <div class="app-list">
                    <h2>App</h2>

                    <div>
                        <button
                            class="btn"
                            onclick="wm.add_window('./Elements/calculator.html')"
                        >
                            <img
                                src="./img/icon/calculator.png"
                                alt="icon"
                                width="30px"
                                height="30px"
                            />
                            <span>Calculator</span>
                        </button>
                    </div>
                    <div>
                        <button
                            class="btn"
                            onclick="wm.add_window('./Elements/JSpaint.html')"
                        >
                            <img
                                src="./img/icon/jspaint.png"
                                alt="icon"
                                width="30px"
                                height="30px"
                            />
                            <span>JS Paint</span>
                        </button>
                    </div>
                    <div>
                        <button
                            class="btn"
                            onclick="wm.add_window('./Elements/map.html')"
                        >
                            <img
                                src="./img/icon/map.png"
                                alt="icon"
                                width="30px"
                                height="30px"
                            />
                            <span>Google Map</span>
                        </button>
                    </div>
                    <div>
                        <button
                            class="btn"
                            onclick="wm.add_window('./Elements/calendar.html')"
                        >
                            <img
                                src="./img/icon/calendar.png"
                                alt="icon"
                                width="30px"
                                height="30px"
                            />
                            <span>Calendar</span>
                        </button>
                    </div>
                    <div>
                        <button
                            class="btn"
                            onclick="wm.add_window('./Elements/note.html')"
                        >
                            <img
                                src="./img/icon/notes.png"
                                alt="icon"
                                width="30px"
                                height="30px"
                            />
                            <span>Elements Note</span>
                        </button>
                    </div>
                    <div>
                        <button
                            class="btn"
                            onclick="wm.add_window('./Elements/musicPlayer.html')"
                        >
                            <img
                                src="./img/icon/music-player.png"
                                alt="icon"
                                width="30px"
                                height="30px"
                            />
                            <span>Music Player</span>
                        </button>
                    </div>
                    <div>
                        <button
                            class="btn"
                            onclick="wm.add_window('./Elements/toDoApp.html')"
                        >
                            <img
                                src="./img/icon/toDoApp.png"
                                alt="icon"
                                width="30px"
                                height="30px"
                            />
                            <span>ToDo App</span>
                        </button>
                    </div>
                    <div>
                        <button
                            class="btn"
                            onclick="wm.add_window('./Elements/BMIcalc.html')"
                        >
                            <img
                                src="./img/icon/bmi.png"
                                alt="icon"
                                width="30px"
                                height="30px"
                            />
                            <span>BMI Calculator</span>
                        </button>
                    </div>
                    <div>
                        <button
                            class="btn"
                            onclick="wm.add_window('./Elements/stopwatch.html')"
                        >
                            <img
                                src="./img/icon/stopwatch.png"
                                alt="icon"
                                width="30px"
                                height="30px"
                            />
                            <span>Stop Watch</span>
                        </button>
                    </div>
                    <div>
                        <button
                            class="btn"
                            onclick="wm.add_window('./Elements/voiceRecoder.html')"
                        >
                            <img
                                src="./img/icon/voiceRecoder.png"
                                alt="icon"
                                width="30px"
                                height="30px"
                            />
                            <span>Voice Recoder</span>
                        </button>
                    </div>
                    <div>
                        <button
                            class="btn"
                            onclick="wm.add_window('./Elements/weather.html')"
                        >
                            <img
                                src="./img/icon/weather.png"
                                alt="icon"
                                width="30px"
                                height="30px"
                            />
                            <span>Google Weather</span>
                        </button>
                    </div>

                    <div>
                        <button
                            class="btn"
                            onclick="wm.add_window('./Elements/pomodoroTimer.html')"
                        >
                            <img
                                src="./img/icon/pomodoroTimer.png"
                                alt="icon"
                                width="30px"
                                height="30px"
                            />
                            <span>Pomodoro Timer</span>
                        </button>
                    </div>
                    <div>
                        <button
                            class="btn"
                            onclick="wm.add_window('./Elements/volumController.html')"
                        >
                            <img
                                src="./img/icon/app-store.png"
                                alt="icon"
                                width="30px"
                                height="30px"
                            />
                            <span>Volum Controller</span>
                        </button>
                    </div>
                </div>
                <div class="tp-widgets">
                    <div class="sub-theme">
                        <h2>Themes</h2>
                        <button
                            class="btn"
                            onclick="window_style.href='window_glass.css'"
                        >
                            Window Glass
                        </button>
                        <button
                            class="btn"
                            onclick="window_style.href='window_xp.css'"
                        >
                            Window XP
                        </button>
                        <button
                            class="btn"
                            onclick="window_style.href='window_basic.css'"
                        >
                            Window Basic
                        </button>
                        <button
                            class="btn"
                            onclick="window_style.href='window_98.css'"
                        >
                            Window 98
                        </button>
                        <button
                            class="btn"
                            onclick="window_style.href='window_flat.css'"
                        >
                            Window Flat
                        </button>
                    </div>
                    <div class="sub-widgets">
                        <h2>Widgets</h2>
                        <div class="weather-info">
                            <img
                                id="weather-icon"
                                src="./img/logo/weather-01.png"
                                alt="Weather Icon"
                                class="fade-in"
                            />
                            <p id="location"></p>
                            <p id="temperature"></p>
                            <p id="description"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Window template instanced by Javascript -->
        <template id="window_template">
            <div class="win" style="width: 500px; height: 90vh">
                <nav class="win-titlebar win-drag-handle">
                    <span class="win-icon">🗔</span>
                    <span class="win-title win-drag-handle"
                        >Unmaned Window</span
                    >
                    <button
                        class="win-btn win-btn-minimize"
                        onclick="wm.minimize_window(this.closest('.win'))"
                        title="Minimize"
                    >
                        &#9866;
                    </button>
                    <button
                        class="win-btn win-btn-restore hidden"
                        onclick="wm.restore_window(this.closest('.win'))"
                        title="Restore"
                    >
                        🗗
                    </button>
                    <button
                        class="win-btn win-btn-maximize"
                        onclick="wm.maximize_window(this.closest('.win'))"
                        title="Maximize"
                    >
                        🗖
                    </button>
                    <button
                        class="win-btn win-btn-close"
                        onclick="wm.remove_window(this.closest('.win'))"
                        title="Close"
                    >
                        🞮
                    </button>
                </nav>
                <iframe class="win-iframe"></iframe>
                <div class="win-resize-handle"></div>
            </div>
        </template>

        <!-- Setup the window manager using Javascript -->
        <script src="./WindowManager.js"></script>
        <script src="./JavaScript/clock/clock.js"></script>
        <script src="./JavaScript/menubar.js"></script>
        <script src="./JavaScript/weather.js"></script>
        <script>
            let wm = new WindowManager(
                window.window_container,
                window.window_template,
                true
            );
            wm.register_mouse_events(window);
            wm.register_message_events();

            // update the minimized window list when a window gets minimized/unminimized
            let minimized_windows = new Map();
            wm.callbacks.win_minimize = (win) => {
                let btn = document.createElement("button");
                btn.innerText = win.title_text.innerText;
                btn.classList.add("btn");
                btn.onclick = () => wm.unminimize_window(win);
                minimized_windows.set(win, btn);
                window.minimized_window_list.appendChild(btn);
            };
            wm.callbacks.win_unminimize = (win) => {
                let btn = minimized_windows.get(win);
                btn.remove();
                minimized_windows.delete(win);
            };

            // hide the HTML content scrollbars if a window is maximized
            wm.callbacks.wm_has_maximized = (has_maximized) => {
                if (has_maximized) {
                    document.body.style.overflow = "hidden";
                } else {
                    document.body.style.overflow = "";
                }
            };
        </script>
    </body>
</html>
